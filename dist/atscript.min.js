!function(t){var e={};function s(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=10)}([function(t,e,s){"use strict";var n;s.d(e,"b",(function(){return n})),s.d(e,"a",(function(){return r})),function(t){t[t.Eof=0]="Eof",t[t.Panic=1]="Panic",t[t.Lambda=2]="Lambda",t[t.Ampersand=3]="Ampersand",t[t.AtSign=4]="AtSign",t[t.Caret=5]="Caret",t[t.Comma=6]="Comma",t[t.Dollar=7]="Dollar",t[t.Dot=8]="Dot",t[t.Hash=9]="Hash",t[t.LeftBrace=10]="LeftBrace",t[t.LeftBracket=11]="LeftBracket",t[t.LeftParen=12]="LeftParen",t[t.Percent=13]="Percent",t[t.Pipe=14]="Pipe",t[t.RightBrace=15]="RightBrace",t[t.RightBracket=16]="RightBracket",t[t.RightParen=17]="RightParen",t[t.Semicolon=18]="Semicolon",t[t.Slash=19]="Slash",t[t.Star=20]="Star",t[t.Arrow=21]="Arrow",t[t.Bang=22]="Bang",t[t.BangEqual=23]="BangEqual",t[t.Colon=24]="Colon",t[t.Equal=25]="Equal",t[t.EqualEqual=26]="EqualEqual",t[t.Greater=27]="Greater",t[t.GreaterEqual=28]="GreaterEqual",t[t.Less=29]="Less",t[t.LessEqual=30]="LessEqual",t[t.Minus=31]="Minus",t[t.MinusEqual=32]="MinusEqual",t[t.MinusMinus=33]="MinusMinus",t[t.PercentEqual=34]="PercentEqual",t[t.Plus=35]="Plus",t[t.PlusEqual=36]="PlusEqual",t[t.PlusPlus=37]="PlusPlus",t[t.Question=38]="Question",t[t.SlashEqual=39]="SlashEqual",t[t.StarEqual=40]="StarEqual",t[t.Identifier=41]="Identifier",t[t.String=42]="String",t[t.Number=43]="Number",t[t.Regex=44]="Regex",t[t.And=45]="And",t[t.Base=46]="Base",t[t.Class=47]="Class",t[t.Do=48]="Do",t[t.Else=49]="Else",t[t.Extends=50]="Extends",t[t.False=51]="False",t[t.For=52]="For",t[t.Function=53]="Function",t[t.If=54]="If",t[t.New=55]="New",t[t.Null=56]="Null",t[t.Or=57]="Or",t[t.Print=58]="Print",t[t.Return=59]="Return",t[t.True=60]="True",t[t.Var=61]="Var",t[t.While=62]="While"}(n||(n={}));class r{constructor(t,e,s,r){this.name=n[t],this.type=t,this.lexeme=e,this.literal=s,this.line=r}toString(){return`[(${this.line}):"${this.lexeme}"]`}}},function(t,e,s){"use strict";var n;!function(t){t[t.Null=0]="Null",t[t.Void=1]="Void",t[t.Any=2]="Any",t[t.Boolean=3]="Boolean",t[t.Number=4]="Number",t[t.String=5]="String",t[t.List=6]="List",t[t.Dictionary=7]="Dictionary",t[t.Object=8]="Object",t[t.Class=9]="Class",t[t.Function=10]="Function",t[t.Lambda=11]="Lambda",t[t.Range=12]="Range",t[t.Return=13]="Return"}(n||(n={}));class r{constructor(t,e=n.Any){this.type=n.Any,this.value=t,this.type=e}isString(){return this.type===n.String}isNull(){return this.type===n.Null}isBoolean(){return this.type===n.Boolean}isNumber(){return this.type===n.Number}isRange(){return this.type===n.Range}isFunction(){return this.type===n.Function}isClass(){return this.type===n.Class}isLambda(){return this.type===n.Function&&"@"===this.name}isObject(){return this.type===n.Object}isTruthy(){if(this.isNull())return!1;if(this.isBoolean())return Boolean(this.value);if(this.isNumber()&&0===this.value)return!1;if(this.isString()&&0===this.value.toString().length)return!1;if(null===this.value)throw new Error("Unknown error value Any is null");if(void 0===this.value)throw new Error("Unknown error value Any is undefined");return!0}isEqual(t){return this.value===t.value}get(t){throw conzole.error(`key ${t} does not exist in ${this}`),new Error("Error in Any getter")}set(t,e){throw conzole.error(`key ${t} does not exist in ${this}`),new Error("Error in Any setter")}toString(){return this.value.toString()}}class i extends r{constructor(){super(null),this.type=n.Null}toString(){return"null"}}var a=s(3);class o extends r{constructor(t){super(t,n.Return)}}class c extends r{constructor(t,e,s){super(s,n.Function),this.arity=e,this.name=t}call(t,e,s){return this.value(t,e,s)}toString(){return`<${this.name}  function>`}}class u extends c{constructor(t,e){super(t.name.lexeme,t.params.length,null),this.declaration=t,this.closure=e}call(t,e,s){const n=new a.a(this.closure);for(let t=0;t<this.declaration.params.length;t++)n.define(this.declaration.params[t].lexeme,e[t]);n.set("this",t);let r=null;try{r=s.scope,s.executeBlock(this.declaration.body,n)}catch(t){if(t instanceof o)return r&&(s.scope=r),t.value;throw conzole.error("Runtime error. Execution has been stopped"),conzole.error(t.message),new Error("Runtime error. Execution has been stopped")}return null}}class h extends r{constructor(t){super(t,n.Boolean)}}class l extends r{constructor(t,e,s){super(e,n.Class),this.name=t,this.parent=s}get(t){return this.value.has(t.value)?this.value.get(t.value):this.parent.isClass()?this.parent.get(t):new i}set(t,e){return this.value.set(t.value,e),e}toString(){return`<${this.name} class>`}}class p extends r{constructor(t){super(t,n.Dictionary)}get(t){return this.value.has(t.value)?this.value.get(t.value):new i}set(t,e){return this.value.set(t.value,e),e}toString(){const t=[];return this.value.forEach((e,s)=>{t.push(`${s.toString()}: ${e}`)}),`{${t.join("; ")}}`}}class d extends r{constructor(t){super(t,n.List)}get(t){return t.isNumber()?this.value[t.value]:t.isRange?this.range(t):new i}set(t,e){return t.isNumber()&&(this.value[t.value]=e),e}range(t){const e=[];return t.iterate(this.value.length,t=>{e.push(this.value[t])}),new d(e)}toString(){return`[${this.value.join(",")}]`}}class m extends r{constructor(t){super(t,n.Number)}}class b extends r{constructor(t,e){super(t,n.Object),this.conztructor=e}get(t){const e=this.conztructor.get(t);return e.isFunction()?e:this.value.has(t.value)?this.value.get(t.value):new i}set(t,e){return this.value.set(t.value,e),e}toString(){return`<${this.constructor.name} object>`}}class f{constructor(t,e,s){this.start=t,this.end=e,this.step=s}normalize(t){null===this.step&&(this.step=1),null===this.end&&(this.end=this.step>0?t-1:0),null===this.start&&(this.start=this.step>0?0:t-1)}}class g extends r{constructor(t){super(t,n.Range)}iterate(t,e){if(this.value.normalize(t),this.value.step>0)for(let t=this.value.start;t<=this.value.end;t+=this.value.step)e(t);else if(this.value.step<0)for(let t=this.value.start;t>=this.value.end;t+=this.value.step)e(t);else conzole.warn("[range error] => 0 is not a valid step")}}var v=s(4);class x extends r{constructor(t){super(t,n.String)}get(t){return t.isNumber()?new x(this.value[t.value]):t.isRange()?this.range(t):"length"===t.value?new m(this.value.length):v.a.String.has(t.value)?v.a.String.get(t.value):new i}set(t,e){return new i}arity(){return 0}range(t){let e="";return t.iterate(this.value.length,t=>{e+=this.value[t]}),new x(e)}}class w extends r{constructor(t){super(t,n.Void)}}s.d(e,"o",(function(){return n})),s.d(e,"a",(function(){return r})),s.d(e,"c",(function(){return c})),s.d(e,"f",(function(){return u})),s.d(e,"b",(function(){return h})),s.d(e,"d",(function(){return l})),s.d(e,"e",(function(){return p})),s.d(e,"g",(function(){return d})),s.d(e,"i",(function(){return m})),s.d(e,"h",(function(){return i})),s.d(e,"j",(function(){return b})),s.d(e,"k",(function(){return g})),s.d(e,"p",(function(){return f})),s.d(e,"l",(function(){return o})),s.d(e,"m",(function(){return x})),s.d(e,"n",(function(){return w}))},function(t,e,s){"use strict";s.d(e,"a",(function(){return r})),s.d(e,"c",(function(){return i})),s.d(e,"d",(function(){return a})),s.d(e,"e",(function(){return o})),s.d(e,"f",(function(){return c})),s.d(e,"g",(function(){return u})),s.d(e,"h",(function(){return h})),s.d(e,"i",(function(){return l})),s.d(e,"l",(function(){return p})),s.d(e,"j",(function(){return d})),s.d(e,"k",(function(){return m})),s.d(e,"m",(function(){return b})),s.d(e,"n",(function(){return f})),s.d(e,"o",(function(){return g})),s.d(e,"p",(function(){return v})),s.d(e,"q",(function(){return x})),s.d(e,"b",(function(){return w})),s.d(e,"r",(function(){return E})),s.d(e,"s",(function(){return S})),s.d(e,"t",(function(){return k})),s.d(e,"u",(function(){return y}));class n{constructor(){}}class r extends n{constructor(t,e){super(),this.name=t,this.value=e}accept(t){return t.visitAssignExpr(this)}toString(){return"Expr.Assign"}}class i extends n{constructor(t,e,s){super(),this.left=t,this.operator=e,this.right=s}accept(t){return t.visitBinaryExpr(this)}toString(){return"Expr.Binary"}}class a extends n{constructor(t,e,s,n){super(),this.callee=t,this.paren=e,this.args=s,this.thiz=n}accept(t){return t.visitCallExpr(this)}toString(){return"Expr.Call"}}class o extends n{constructor(t){super(),this.properties=t}accept(t){return t.visitDictionaryExpr(this)}toString(){return"Expr.Dictionary"}}class c extends n{constructor(t,e){super(),this.entity=t,this.key=e}accept(t){return t.visitGetExpr(this)}toString(){return"Expr.Get"}}class u extends n{constructor(t){super(),this.expression=t}accept(t){return t.visitGroupingExpr(this)}toString(){return"Expr.Grouping"}}class h extends n{constructor(t){super(),this.name=t}accept(t){return t.visitKeyExpr(this)}toString(){return"Expr.Key"}}class l extends n{constructor(t){super(),this.lambda=t}accept(t){return t.visitLambdaExpr(this)}toString(){return"Expr.Lambda"}}class p extends n{constructor(t,e,s){super(),this.left=t,this.operator=e,this.right=s}accept(t){return t.visitLogicalExpr(this)}toString(){return"Expr.Logical"}}class d extends n{constructor(t){super(),this.value=t}accept(t){return t.visitListExpr(this)}toString(){return"Expr.List"}}class m extends n{constructor(t){super(),this.value=t}accept(t){return t.visitLiteralExpr(this)}toString(){return"Expr.Literal"}}class b extends n{constructor(t){super(),this.clazz=t}accept(t){return t.visitNewExpr(this)}toString(){return"Expr.New"}}class f extends n{constructor(t,e){super(),this.name=t,this.increment=e}accept(t){return t.visitPostfixExpr(this)}toString(){return"Expr.Postfix"}}class g extends n{constructor(t,e,s){super(),this.start=t,this.end=e,this.step=s}accept(t){return t.visitRangeExpr(this)}toString(){return"Expr.Range"}}class v extends n{constructor(t){super(),this.value=t}accept(t){return t.visitRegExExpr(this)}toString(){return"Expr.RegEx"}}class x extends n{constructor(t,e,s){super(),this.entity=t,this.key=e,this.value=s}accept(t){return t.visitSetExpr(this)}toString(){return"Expr.Set"}}class w extends n{constructor(t){super(),this.paren=t}accept(t){return t.visitBaseExpr(this)}toString(){return"Expr.Base"}}class E extends n{constructor(t,e,s){super(),this.condition=t,this.thenExpr=e,this.elseExpr=s}accept(t){return t.visitTernaryExpr(this)}toString(){return"Expr.Ternary"}}class S extends n{constructor(t,e){super(),this.operator=t,this.right=e}accept(t){return t.visitUnaryExpr(this)}toString(){return"Expr.Unary"}}class k extends n{constructor(t){super(),this.name=t}accept(t){return t.visitVariableExpr(this)}toString(){return"Expr.Variable"}}class y extends n{constructor(t){super(),this.value=t}accept(t){return t.visitZtringExpr(this)}toString(){return"Expr.Ztring"}}},function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));class n{constructor(t=null){this.values=new Map,this.parent=t}scopeError(t){throw conzole.error(`[scope error] => ${t}`),new Error}set(t,e){this.values.set(t,e)}define(t,e){this.values.has(t)?this.scopeError(`identifier "${t}" has already been defined`):this.set(t,e)}assign(t,e){if(this.values.has(t))this.set(t,e);else{if(null!==this.parent)return this.parent.assign(t,e);this.scopeError(`Identifier "${t}" has not been defined`)}}get(t){return this.values.has(t.lexeme)?this.values.get(t.lexeme):null!==this.parent?this.parent.get(t):void this.scopeError(`Error at (${t.line}): "${t.lexeme}" is not defined`)}}},function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));var n=s(1);function r(t,e,s){return new n.c(t,e,(e,r)=>{const i=r.map(t=>t.value),a=e.value[t](...i);switch(s){case n.o.Boolean:return new n.b(a);case n.o.String:return new n.m(a);case n.o.Number:return new n.i(a);case n.o.List:return new n.g(a);default:return new n.a(a)}})}class i{static size(t,e){return new n.i(e[0].value.length)}static join(t,e){return new n.m(t.value.join(e[0].value))}}const a={List:new Map([["size",new n.c("size",0,i.size)],["split",new n.c("join",1,i.join)]]),Math:new Map([["pi",new n.i(Math.PI)],["test",new n.a(Math.PI)],["rand",new n.c("rand",0,(t,e)=>new n.i(Math.PI))]]),String:new Map([["toUpper",r("toUpperCase",0,n.o.String)],["toLower",r("toLowerCase",0,n.o.String)],["size",new n.c("size",0,class{static size(t,e){return new n.i(t.value.length)}static indexOf(t,e){return new n.i(t.value.indexOf(e[0].value))}}.size)],["split",r("split",1,n.o.List)],["concat",r("concat",1,n.o.String)],["includes",r("includes",1,n.o.Boolean)],["indexOf",r("indexOf",1,n.o.Number)],["lastIndexOf",r("lastIndexOf",1,n.o.Number)],["repeat",r("repeat",1,n.o.String)],["replace",r("replace",2,n.o.String)],["search",r("search",1,n.o.Number)],["slice",r("slice",-1,n.o.String)],["substring",r("substring",-1,n.o.String)],["trim",r("trim",0,n.o.String)]])}},function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var n=s(2),r=s(3),i=s(0),a=s(1),o=s(4);class c{constructor(){this.global=new r.a,this.scope=this.global,new a.e(new Map).set(new a.m("pi"),new a.i(Math.PI)),this.global.set("math",new a.e(o.a.Math))}evaluate(t){return t.result=t.accept(this)}execute(t){return t.result=t.accept(this)}interpet(t){for(const e of t)this.execute(e);return t}interpreterError(t){throw conzole.log(`[interpreter error] => ${t}`),new Error}visitExpressionStmt(t){return this.evaluate(t.expression)}visitPrintStmt(t){const e=this.evaluate(t.expression);return conzole.log(e.toString()),e}visitVarStmt(t){let e=new a.h;return null!==t.initializer&&(e=this.evaluate(t.initializer)),e.isLambda()&&(e.name=t.name.lexeme),this.scope.define(t.name.lexeme,e),e}visitVariableExpr(t){return this.scope.get(t.name)}visitPostfixExpr(t){const e=this.scope.get(t.name).value,s=new a.i(e+t.increment);return this.scope.assign(t.name.lexeme,s),e}visitListExpr(t){const e=[];for(const s of t.value)e.push(this.evaluate(s));return new a.g(e)}visitZtringExpr(t){return new a.m(t.value)}visitRegExExpr(t){return new a.h}visitAssignExpr(t){const e=this.evaluate(t.value);return this.scope.assign(t.name.lexeme,e),e}visitBinaryExpr(t){let e=this.evaluate(t.left).value,s=this.evaluate(t.right).value;switch(e=e instanceof a.m?e.toString():e,s=s instanceof a.m?s.toString():s,t.operator.type){case i.b.Minus:case i.b.MinusEqual:return new a.i(e-s);case i.b.Slash:case i.b.SlashEqual:return new a.i(e/s);case i.b.Star:case i.b.StarEqual:return new a.i(e*s);case i.b.Percent:case i.b.PercentEqual:return new a.i(e%s);case i.b.Plus:case i.b.PlusEqual:return isNaN(e)||isNaN(s)?new a.m(e+s):new a.i(e+s);case i.b.Pipe:return new a.i(e|s);case i.b.Caret:return new a.i(e^s);case i.b.Greater:return new a.b(e>s);case i.b.GreaterEqual:return new a.b(e>=s);case i.b.Less:return new a.b(e<s);case i.b.LessEqual:return new a.b(e<=s);case i.b.EqualEqual:return new a.b(e===s);case i.b.BangEqual:return new a.b(e!==s);default:return conzole.warn(t),null}}visitLogicalExpr(t){return t.operator.type===i.b.And?this.evaluate(t.left)&&this.evaluate(t.right):this.evaluate(t.left)||this.evaluate(t.right)}visitTernaryExpr(t){return this.evaluate(t.condition).isTruthy()?this.evaluate(t.thenExpr):this.evaluate(t.elseExpr)}visitGroupingExpr(t){return this.evaluate(t.expression)}visitLiteralExpr(t){return t.value}visitUnaryExpr(t){const e=this.evaluate(t.right).value;switch(t.operator.type){case i.b.Minus:return new a.i(-Number(e));case i.b.Bang:return new a.b(!Boolean(e));case i.b.PlusPlus:const s=Number(e)+1;return this.scope.assign(t.right.name.lexeme,new a.i(s)),new a.i(s);case i.b.MinusMinus:const n=Number(e)-1;return this.scope.assign(t.right.name.lexeme,new a.i(n)),new a.i(n);default:return null}}executeBlock(t,e){const s=this.scope;this.scope=e;for(const e of t)e.result=this.execute(e);return this.scope=s,new a.n("block")}visitBlockStmt(t){return this.executeBlock(t.statements,new r.a(this.scope))}visitIfStmt(t){return this.evaluate(t.condition).isTruthy()?this.execute(t.thenStmt):null!==t.elseStmt?this.execute(t.elseStmt):void 0}visitWhileStmt(t){for(;this.evaluate(t.condition).isTruthy();)this.execute(t.loop);return new a.n("while")}visitDoWhileStmt(t){do{this.execute(t.loop)}while(this.evaluate(t.condition).isTruthy());return new a.n("dowhile")}visitCallExpr(t){const e=this.evaluate(t.callee);e.isFunction()||this.interpreterError(`${e} is not a function`);let s=null;t.callee instanceof n.f?s=t.callee.entity instanceof n.b?this.scope.get(new i.a(i.b.Identifier,"this","this",0)):this.evaluate(t.callee.entity):null!==t.thiz&&(s=t.thiz);const r=[];for(const e of t.args)r.push(this.evaluate(e));const o=e;if(r.length!==o.arity&&-1!==o.arity&&(conzole.warn(`Warning at (${t.paren.line}): ${e} mismatched argument length; \n Expected ${o.arity} but got ${r.length} `),r.length<o.arity))for(let t=r.length;t<=o.arity;++t)r.push(new a.h);return o.call(s,r,this)}visitBaseExpr(t){const e=this.scope.get(t.paren);e.isObject()||this.interpreterError("base expression can be used only inside methods");const s=e.conztructor,n=s.parent;return n.isNull()&&this.interpreterError("Class "+s+"is not inherited from parent"),n}visitNewExpr(t){const e=t.clazz,s=this.evaluate(e.callee);s.isClass()||this.interpreterError(`'${s}' is not a class. 'new' statement must be used with classes.`);const r=new a.j(new Map,s),i=s.get(new a.m("constructor"));return i.isFunction()&&this.evaluate(new n.d(new n.f(new n.k(r),new n.h(i.declaration.name)),i.declaration.name,e.args,r)),r}visitDictionaryExpr(t){const e=new a.e(new Map);for(const s of t.properties){const t=this.evaluate(s.key),n=this.evaluate(s.value);e.set(t,n)}return e}visitKeyExpr(t){return new a.a(t.name.literal)}visitGetExpr(t){const e=this.evaluate(t.entity),s=this.evaluate(t.key);return e.get(s)}visitSetExpr(t){const e=this.evaluate(t.entity),s=this.evaluate(t.key),n=this.evaluate(t.value);return e.set(s,n),n.value}visitFuncStmt(t){const e=new a.f(t,this.scope);return this.scope.define(t.name.lexeme,e),new a.h}visitClassStmt(t){let e;e=null===t.parent?new a.h:this.scope.get(t.parent);const s=new Map;for(const e of t.methods)s.set(e.name.lexeme,new a.f(e,this.scope));const n=new a.d(t.name.lexeme,s,e);return this.scope.define(t.name.lexeme,n),n}visitLambdaExpr(t){const e=t.lambda;return new a.f(e,this.scope)}visitReturnStmt(t){let e=new a.h;throw t.value&&(e=this.evaluate(t.value)),new a.l(e)}visitRangeExpr(t){return new a.k(new a.p(t.start?this.evaluate(t.start).value:null,t.end?this.evaluate(t.end).value:null,t.step?this.evaluate(t.step).value:null))}}},function(t,e,s){"use strict";var n;s.d(e,"a",(function(){return r})),function(t){t[t.User=0]="User",t[t.Error=1]="Error",t[t.Warning=2]="Warning",t[t.Info=3]="Info"}(n||(n={}));class r{constructor(){this.messages=[]}add(t,e){this.messages.push({text:t,time:new Date,type:e})}clear(){this.messages=[]}log(t){this.add(t,n.User)}warn(t){this.add(t,n.Warning)}error(t){this.add(t,n.Error)}info(t){this.add(t,n.Info)}first(){return this.messages[0].text}last(){return this.messages[this.messages.length-1].text}print(){return console.log(this.messages.map(t=>t.text))}}},function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));const n="\n\nclass Person {\n\n    constructor(name) {\n        this.name = name;\n    }\n\n    hello() {\n        print this.name + ' says hello';\n    }\n}\n\nclass Student extends Person {\n\n    constructor(name, grade) {\n        base.constructor(name);\n        this.grade = grade;\n    }\n\n    hello() {\n        base.hello();\n        print this.name + 'is in grade ' + this.grade;\n    }\n}\n\nvar s = new Student('John', 3);\ns.hello();\n\n\n"},function(t,e,s){"use strict";var n=s(0);function r(t){return t>="0"&&t<="9"}function i(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}s.d(e,"a",(function(){return a}));class a{constructor(t){this.tokens=[],this.current=0,this.line=1,this.start=0,this.source=t}eof(){return this.current>=this.source.length}advance(){return this.current++,this.source.charAt(this.current-1)}addToken(t,e){const s=this.source.substring(this.start,this.current);this.tokens.push(new n.a(t,s,e,this.line))}match(t){return!this.eof()&&(this.source.charAt(this.current)===t&&(this.current++,!0))}peek(){return this.eof()?"\0":this.source.charAt(this.current)}peekNext(){return this.current+1>=this.source.length?"\0":this.source.charAt(this.current+1)}comment(){for(;"\n"!==this.peek()&&!this.eof();)this.advance()}string(t,e){for(;this.peek()!==t&&!this.eof();)"\n"===this.peek()&&this.line++,this.advance();if(this.eof())return void this.scanError(`Unterminated string, expecting closing ${t}`);this.advance();const s=this.source.substring(this.start+1,this.current-1);this.addToken(n.b.String,s)}number(){for(;r(this.peek());)this.advance();for("."===this.peek()&&r(this.peekNext())&&this.advance();r(this.peek());)this.advance();for("e"===this.peek().toLowerCase()&&(this.advance(),"-"!==this.peek()&&"+"!==this.peek()||this.advance());r(this.peek());)this.advance();const t=this.source.substring(this.start,this.current);this.addToken(n.b.Number,Number(t))}identifier(){for(;i(t=this.peek())||r(t);)this.advance();var t;const e=this.source.substring(this.start,this.current),s=e.charAt(0).toUpperCase()+e.substr(1).toLowerCase();var a;a=s,n.b[a]>=n.b.And?this.addToken(n.b[s],e):this.addToken(n.b.Identifier,e)}regex(){for(;"#"!==this.peek()&&!this.eof();)"\n"===this.peek()&&this.line++,this.advance();if(this.eof())return void this.scanError("Unterminated RegEx, expecting closing #");this.advance();const t=this.source.substring(this.start+1,this.current-1);let e="";if(-1!==["g","i","s","u","y"].indexOf(this.peek())){const t=this.current;for(;"#"!==this.peek()&&!this.eof();)"\n"===this.peek()&&this.line++,this.advance();if(this.eof())return void this.scanError("Unterminated RegEx, expecting closing # after flags");e=this.source.substring(t,this.current),this.advance()}this.addToken(n.b.Regex,new RegExp(t,e))}scan(){for(;!this.eof();)this.start=this.current,this.scanToken();return this.tokens.push(new n.a(n.b.Eof,"",null,this.line)),this.tokens}scanToken(){const t=this.advance();switch(t){case"(":this.addToken(n.b.LeftParen,null);break;case")":this.addToken(n.b.RightParen,null);break;case"[":this.addToken(n.b.LeftBracket,null);break;case"]":this.addToken(n.b.RightBracket,null);break;case"{":this.addToken(n.b.LeftBrace,null);break;case"}":this.addToken(n.b.RightBrace,null);break;case",":this.addToken(n.b.Comma,null);break;case".":this.addToken(n.b.Dot,null);break;case";":this.addToken(n.b.Semicolon,null);break;case"^":this.addToken(n.b.Caret,null);break;case"?":this.addToken(n.b.Question,null);break;case":":this.addToken(n.b.Colon,null);break;case"$":this.addToken(n.b.Dollar,null);break;case"@":this.addToken(n.b.Function,"@");break;case"*":this.addToken(this.match("=")?n.b.StarEqual:n.b.Star,null);break;case"%":this.addToken(this.match("=")?n.b.PercentEqual:n.b.Percent,null);break;case"|":this.addToken(this.match("|")?n.b.Or:n.b.Pipe,null);break;case"&":this.addToken(this.match("&")?n.b.And:n.b.Ampersand,null);break;case"<":this.addToken(this.match("=")?n.b.LessEqual:n.b.Less,null);break;case">":this.addToken(this.match("=")?n.b.GreaterEqual:n.b.Greater,null);break;case"!":this.addToken(this.match("=")?n.b.BangEqual:n.b.Bang,null);break;case"=":this.addToken(this.match("=")?n.b.EqualEqual:this.match(">")?n.b.Arrow:n.b.Equal,null);break;case"+":this.addToken(this.match("+")?n.b.PlusPlus:this.match("=")?n.b.PlusEqual:n.b.Plus,null);break;case"-":this.addToken(this.match("-")?n.b.MinusMinus:this.match(">")?n.b.Return:this.match("=")?n.b.MinusEqual:n.b.Minus,null);break;case"/":this.match("/")?this.comment():this.addToken(this.match("=")?n.b.SlashEqual:n.b.Slash,null);break;case"\n":this.line++;break;case"'":case'"':case"`":this.string(t,n.b.String);break;case"#":this.regex();case" ":case"\r":case"\t":break;default:r(t)?this.number():i(t)?this.identifier():this.scanError(`Unexpected character '${t}'`)}}scanError(t){throw conzole.error(`Error at (${this.line}):  ${t}`),new Error("Error while scanning. Execution has been stoped")}}},function(t,e,s){"use strict";var n=s(2);class r{constructor(){}}class i extends r{constructor(t){super(),this.statements=t}accept(t){return t.visitBlockStmt(this)}toString(){return"Stmt.Block"}}class a extends r{constructor(t,e,s){super(),this.name=t,this.parent=e,this.methods=s}accept(t){return t.visitClassStmt(this)}toString(){return"Stmt.Class"}}class o extends r{constructor(t,e){super(),this.loop=t,this.condition=e}accept(t){return t.visitDoWhileStmt(this)}toString(){return"Stmt.DoWhile"}}class c extends r{constructor(t){super(),this.expression=t}accept(t){return t.visitExpressionStmt(this)}toString(){return"Stmt.Expression"}}class u extends r{constructor(t,e,s){super(),this.name=t,this.params=e,this.body=s}accept(t){return t.visitFuncStmt(this)}toString(){return"Stmt.Func"}}class h extends r{constructor(t,e,s){super(),this.condition=t,this.thenStmt=e,this.elseStmt=s}accept(t){return t.visitIfStmt(this)}toString(){return"Stmt.If"}}class l extends r{constructor(t){super(),this.expression=t}accept(t){return t.visitPrintStmt(this)}toString(){return"Stmt.Print"}}class p extends r{constructor(t,e){super(),this.keyword=t,this.value=e}accept(t){return t.visitReturnStmt(this)}toString(){return"Stmt.Return"}}class d extends r{constructor(t,e,s){super(),this.name=t,this.type=e,this.initializer=s}accept(t){return t.visitVarStmt(this)}toString(){return"Stmt.Var"}}class m extends r{constructor(t,e){super(),this.condition=t,this.loop=e}accept(t){return t.visitWhileStmt(this)}toString(){return"Stmt.While"}}var b=s(0),f=s(1);s.d(e,"a",(function(){return g}));class g{constructor(t){this.current=0,this.tokens=t}parse(){const t=[];for(;!this.eof();)t.push(this.declaration());return t}match(...t){for(const e of t)if(this.check(e))return this.advance(),!0;return!1}advance(){return this.eof()||this.current++,this.previous()}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}check(t){return this.peek().type===t}eof(){return this.check(b.b.Eof)}consume(t,e){return this.check(t)?this.advance():this.parseError(this.previous(),e)}extraSemicolon(){const t=this.match(b.b.Semicolon);if(this.check(b.b.Semicolon))for(;this.check(b.b.Semicolon);)this.consume(b.b.Semicolon,"");return t}parseError(t,e){throw t.type===b.b.Eof?conzole.error(`parse error at (${t.line}): at end ${e}`):conzole.error(`[line (${t.line}) parse error at "${t.lexeme}"] => ${e}`),new Error("Error parsing")}parseWarning(t){const e=this.previous();conzole.warn(`[line (${e.line}) parse warning at "${e.lexeme}"] => ${t}`)}synchronize(){for(this.advance();!this.eof();){if(this.previous().type===b.b.Semicolon)return;switch(this.peek().type){case b.b.Class:case b.b.Function:case b.b.Var:case b.b.For:case b.b.If:case b.b.While:case b.b.Print:case b.b.Return:return}this.advance()}}declaration(){try{return this.match(b.b.Class)?this.classDeclaration():this.match(b.b.Function)?this.funcDeclaration("function"):this.match(b.b.Var)?this.varDeclaration():this.statement()}catch(t){throw new Error("Error parsing. Execution has been stopped")}}classDeclaration(){const t=this.consume(b.b.Identifier,"Expected a class name");let e=null;this.match(b.b.Extends)&&(e=this.consume(b.b.Identifier,"Expected a parent name")),this.consume(b.b.LeftBrace,'Expected "{" after class name');const s=[];for(;!this.check(b.b.RightBrace)&&!this.eof();)this.check(b.b.Function)&&this.consume(b.b.Function,""),s.push(this.funcDeclaration("method"));return this.consume(b.b.RightBrace,`Expected "}" after class "${t.literal}" methods`),this.extraSemicolon()&&this.parseWarning(`Unnecessary semicolon after class ${t.lexeme} declaration`),new a(t,e,s)}funcDeclaration(t){const e=this.consume(b.b.Identifier,`Expected a ${t} name`);return this.funcParamsBody(e,t)}funcParams(){const t=[];if(!this.check(b.b.RightParen))do{t.length>=255&&this.parseError(this.peek(),"Parameter count exceeds 255"),t.push(this.consume(b.b.Identifier,"Expected a parameter name"))}while(this.match(b.b.Comma));return this.consume(b.b.RightParen,'Expect ")" after parameters'),t}funcParamsBody(t,e){this.consume(b.b.LeftParen,`Expected "(" after ${e}`);const s=this.funcParams();if(this.match(b.b.LeftBrace)){const e=this.block();return t.type!==b.b.Lambda&&this.extraSemicolon()&&this.parseWarning(`Unnecessary semicolon after function ${t.lexeme} declaration`),new u(t,s,e)}if(this.match(b.b.Arrow)){const e=[];let n;const r=this.previous();return this.check(b.b.Semicolon)||(n=this.expression()),this.match(b.b.Semicolon),e.push(new p(r,n)),new u(t,s,e)}this.consume(b.b.LeftBrace,`Expect "{" before ${e} body`)}varDeclaration(){const t=this.consume(b.b.Identifier,"Expected a variable name");let e=null;return this.match(b.b.Equal)&&(e=this.expression()),this.consume(b.b.Semicolon,'Expected semicolon ";" after a value.'),new d(t,null,e)}statement(){return this.match(b.b.If)?this.ifStatement():this.match(b.b.Print)?this.printStatement():this.match(b.b.Do)?this.doWhileStatement():this.match(b.b.While)?this.whileStatement():this.match(b.b.For)?this.forStatement():this.match(b.b.LeftBrace)?new i(this.block()):this.match(b.b.Return)?this.returnStatement():this.expressionStatement()}ifStatement(){this.consume(b.b.LeftParen,'Expected "(" after an if');const t=this.expression();this.consume(b.b.RightParen,'Expected ")" after if condition');const e=this.statement();let s=null;return this.match(b.b.Else)&&(s=this.statement()),new h(t,e,s)}whileStatement(){this.consume(b.b.LeftParen,'Expected "(" after a while statement');const t=this.expression();this.consume(b.b.RightParen,'Expected ")" after while condition');const e=this.statement();return new m(t,e)}forStatement(){let t,e,s;this.consume(b.b.LeftParen,'Expected "(" after a for statement'),t=this.match(b.b.Semicolon)?null:this.match(b.b.Var)?this.varDeclaration():this.expressionStatement(),this.check(b.b.Semicolon)||(e=this.expression()),this.consume(b.b.Semicolon,'Expected ";" after loop condition'),this.check(b.b.RightParen)||(s=this.expression()),this.consume(b.b.RightParen,'Expected ";" after loop condition');let r=this.statement();return null!==s&&(r=new i([r,new c(s)])),null===e&&(e=new n.k(new f.b(!0))),r=new m(e,r),null!==t&&(r=new i([t,r])),r}doWhileStatement(){const t=this.statement();this.consume(b.b.While,"Expected condition after do statement"),this.consume(b.b.LeftParen,'Expected "(" after a while');const e=this.expression();return this.consume(b.b.RightParen,'Expected ")" after while condition'),this.consume(b.b.Semicolon,'Expected semicolon ";" after a do while condition'),new o(t,e)}printStatement(){const t=this.expression();return this.consume(b.b.Semicolon,'Expected semicolon ";" after expression.'),new l(t)}returnStatement(){const t=this.previous();let e=null;return this.check(b.b.Semicolon)||(e=this.expression()),this.consume(b.b.Semicolon,'Exected semicolon ";" after return statement'),new p(t,e)}block(){const t=[];for(;!this.check(b.b.RightBrace)&&!this.eof();)t.push(this.declaration());return this.consume(b.b.RightBrace,'Expected closing brace "}" after block statement'),t}expressionStatement(){const t=this.expression();if(this.consume(b.b.Semicolon,`Expected semicolon ";" after ${t} expression`),this.match(b.b.Semicolon)){const t=this.previous();for(conzole.warn(`[line (${t.line}) parse warning at "${t.lexeme}"] => unnecessary semicolon or empty statement`);this.match(b.b.Semicolon););}return new c(t)}expression(){return this.assignment()}assignment(){const t=this.ternary();if(this.match(b.b.Equal,b.b.PlusEqual,b.b.MinusEqual,b.b.StarEqual,b.b.SlashEqual)){const e=this.previous();let s=this.assignment();if(t instanceof n.t){const r=t.name;return e.type!==b.b.Equal&&(s=new n.c(new n.t(r),e,s)),new n.a(r,s)}if(t instanceof n.f)return e.type!==b.b.Equal&&(s=new n.c(new n.f(t.entity,t.key),e,s)),new n.q(t.entity,t.key,s);this.parseError(e,"Invalid l-value, is not an assigning target.")}return t}ternary(){const t=this.logicalOr();if(this.match(b.b.Question)){const e=this.ternary();this.consume(b.b.Colon,'Expected ":" after ternary ? expression');const s=this.ternary();return new n.r(t,e,s)}return t}logicalOr(){let t=this.logicalAnd();for(;this.match(b.b.Or);){const e=this.previous(),s=this.logicalAnd();t=new n.l(t,e,s)}return t}logicalAnd(){let t=this.equality();for(;this.match(b.b.And);){const e=this.previous(),s=this.equality();t=new n.l(t,e,s)}return t}equality(){let t=this.comparison();for(;this.match(b.b.BangEqual,b.b.EqualEqual);){const e=this.previous(),s=this.comparison();t=new n.c(t,e,s)}return t}comparison(){let t=this.addition();for(;this.match(b.b.Greater,b.b.GreaterEqual,b.b.Less,b.b.LessEqual);){const e=this.previous(),s=this.addition();t=new n.c(t,e,s)}return t}addition(){let t=this.modulus();for(;this.match(b.b.Minus,b.b.Plus);){const e=this.previous(),s=this.modulus();t=new n.c(t,e,s)}return t}modulus(){let t=this.multiplication();for(;this.match(b.b.Percent);){const e=this.previous(),s=this.multiplication();t=new n.c(t,e,s)}return t}multiplication(){let t=this.unary();for(;this.match(b.b.Slash,b.b.Star);){const e=this.previous(),s=this.unary();t=new n.c(t,e,s)}return t}unary(){if(this.match(b.b.Minus,b.b.Bang,b.b.Dollar,b.b.PlusPlus,b.b.MinusMinus)){const t=this.previous(),e=this.unary();return new n.s(t,e)}return this.newKeyword()}newKeyword(){if(this.match(b.b.New)){const t=this.call();return new n.m(t)}return this.call()}call(){let t=this.primary(),e=!0;do{if(e=!1,this.match(b.b.LeftParen)){e=!0;do{const e=[];if(!this.check(b.b.RightParen))do{e.push(this.expression())}while(this.match(b.b.Comma));const s=this.consume(b.b.RightParen,'Expected ")" after arguments');t=new n.d(t,s,e,null)}while(this.match(b.b.LeftParen))}this.match(b.b.Dot)&&(e=!0,t=this.dotGet(t)),this.match(b.b.LeftBracket)&&(e=!0,t=this.bracketGet(t))}while(e);return t}dotGet(t){const e=this.consume(b.b.Identifier,"Expect property name after '.'"),s=new n.h(e);return new n.f(t,s)}bracketGet(t){let e=null,s=null,r=null;if(this.check(b.b.Colon)||(e=this.expression()),this.match(b.b.Colon)&&!this.check(b.b.Colon)&&(s=this.expression()),this.match(b.b.Colon)&&!this.check(b.b.RightBracket)&&(r=this.expression()),this.consume(b.b.RightBracket,'Expected "]" after property name expression'),!e||s||r){const i=new n.o(e,s,r);return new n.f(t,i)}return new n.f(t,e)}primary(){if(this.match(b.b.False))return new n.k(new f.b(!1));if(this.match(b.b.True))return new n.k(new f.b(!0));if(this.match(b.b.Null))return new n.k(new f.h);if(this.match(b.b.Number))return new n.k(new f.i(this.previous().literal));if(this.match(b.b.String))return new n.u(this.previous().literal);if(this.match(b.b.Regex))return new n.p(this.previous().literal);if(this.match(b.b.Base)){const t=this.previous();return t.lexeme="this",new n.b(t)}if(this.match(b.b.Identifier)){const t=this.previous();return this.match(b.b.PlusPlus)?new n.n(t,1):this.match(b.b.MinusMinus)?new n.n(t,-1):new n.t(t)}if(this.match(b.b.LeftParen)){const t=this.expression();return this.consume(b.b.RightParen,'Expected ")" after expression'),new n.g(t)}if(this.match(b.b.LeftBrace))return this.dictionary();if(this.match(b.b.Function)){const t=new b.a(b.b.Lambda,"@","@",this.previous().line),e=this.funcParamsBody(t,"lambda");return new n.i(e)}if(this.match(b.b.LeftBracket))return this.list();throw this.parseError(this.peek(),"Expected expression")}dictionary(){if(this.match(b.b.RightBrace))return new n.e([]);const t=[];do{if(this.match(b.b.String,b.b.Identifier,b.b.Number)){const e=this.previous();this.consume(b.b.Colon,'Expected ":" colon after member');const s=this.expression();t.push(new n.q(null,new n.h(e),s))}else this.parseError(this.peek(),"String, Number or Identifier expected as a Key of Dictionary {")}while(this.match(b.b.Comma));return this.consume(b.b.RightBrace,'Expected "}" after object literal'),new n.e(t)}list(){const t=[];if(this.match(b.b.RightBracket))return new n.j([]);do{t.push(this.expression())}while(this.match(b.b.Comma));return this.consume(b.b.RightBracket,'Expected "]" after array declaration'),new n.j(t)}}},function(t,e,s){"use strict";s.r(e),function(t){var e=s(8),n=s(9),r=s(5),i=s(6),a=s(7);"undefined"==typeof window&&(t.window=t),window.conzole=new i.a,window.demoSourceCode=a.a,window.atscript=t=>{try{return(new r.a).interpet(new n.a(new e.a(t).scan()).parse())}catch(t){console.error(t)}}}.call(this,s(11))},function(t,e){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch(t){"object"==typeof window&&(s=window)}t.exports=s}]);