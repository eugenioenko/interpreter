!function(t){var e={};function n(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(s,r,function(e){return t[e]}.bind(null,r));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e,n){"use strict";var s;n.d(e,"b",function(){return s}),n.d(e,"a",function(){return r}),function(t){t[t.eof=0]="eof",t[t.panic=1]="panic",t[t.lambda=2]="lambda",t[t.ampersand=3]="ampersand",t[t.atSign=4]="atSign",t[t.caret=5]="caret",t[t.comma=6]="comma",t[t.dollar=7]="dollar",t[t.dot=8]="dot",t[t.leftBrace=9]="leftBrace",t[t.leftBracket=10]="leftBracket",t[t.leftParen=11]="leftParen",t[t.percent=12]="percent",t[t.pipe=13]="pipe",t[t.rightBrace=14]="rightBrace",t[t.rightBracket=15]="rightBracket",t[t.rightParen=16]="rightParen",t[t.semicolon=17]="semicolon",t[t.slash=18]="slash",t[t.star=19]="star",t[t.arrow=20]="arrow",t[t.bang=21]="bang",t[t.bangEqual=22]="bangEqual",t[t.colon=23]="colon",t[t.equal=24]="equal",t[t.equalEqual=25]="equalEqual",t[t.greater=26]="greater",t[t.greaterEqual=27]="greaterEqual",t[t.less=28]="less",t[t.lessEqual=29]="lessEqual",t[t.minus=30]="minus",t[t.minusEqual=31]="minusEqual",t[t.minusMinus=32]="minusMinus",t[t.percentEqual=33]="percentEqual",t[t.plus=34]="plus",t[t.plusEqual=35]="plusEqual",t[t.plusPlus=36]="plusPlus",t[t.question=37]="question",t[t.slashEqual=38]="slashEqual",t[t.starEqual=39]="starEqual",t[t.bangEqualEqual=40]="bangEqualEqual",t[t.equalEqualEqual=41]="equalEqualEqual",t[t.identifier=42]="identifier",t[t.string=43]="string",t[t.number=44]="number",t[t.and=45]="and",t[t.class=46]="class",t[t.do=47]="do",t[t.else=48]="else",t[t.extends=49]="extends",t[t.false=50]="false",t[t.for=51]="for",t[t.func=52]="func",t[t.function=53]="function",t[t.if=54]="if",t[t.let=55]="let",t[t.new=56]="new",t[t.null=57]="null",t[t.or=58]="or",t[t.print=59]="print",t[t.return=60]="return",t[t.super=61]="super",t[t.true=62]="true",t[t.var=63]="var",t[t.while=64]="while"}(s||(s={}));class r{constructor(t,e,n,r){this.name=t,this.type=s[t],this.lexeme=e,this.literal=n,this.line=r}toString(){return`[(${this.line}):"${this.lexeme}"]`}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return u}),n.d(e,"g",function(){return l}),n.d(e,"h",function(){return h}),n.d(e,"k",function(){return p}),n.d(e,"i",function(){return d}),n.d(e,"j",function(){return m}),n.d(e,"l",function(){return f}),n.d(e,"m",function(){return b}),n.d(e,"n",function(){return g}),n.d(e,"o",function(){return v}),n.d(e,"p",function(){return x}),n.d(e,"q",function(){return w}),n.d(e,"r",function(){return E}),n.d(e,"s",function(){return y}),n.d(e,"t",function(){return k});class s{constructor(){}}class r extends s{constructor(t,e){super(),this.name=t,this.value=e}accept(t){return t.visitAssignExpr(this)}toString(){return"Expr.Assign"}}class i extends s{constructor(t,e,n){super(),this.left=t,this.operator=e,this.right=n}accept(t){return t.visitBinaryExpr(this)}toString(){return"Expr.Binary"}}class a extends s{constructor(t,e,n,s){super(),this.callee=t,this.paren=e,this.args=n,this.thiz=s}accept(t){return t.visitCallExpr(this)}toString(){return"Expr.Call"}}class o extends s{constructor(t){super(),this.properties=t}accept(t){return t.visitEntityExpr(this)}toString(){return"Expr.Entity"}}class c extends s{constructor(t,e){super(),this.entity=t,this.key=e}accept(t){return t.visitGetExpr(this)}toString(){return"Expr.Get"}}class u extends s{constructor(t){super(),this.expression=t}accept(t){return t.visitGroupingExpr(this)}toString(){return"Expr.Grouping"}}class l extends s{constructor(t){super(),this.name=t}accept(t){return t.visitKeyExpr(this)}toString(){return"Expr.Key"}}class h extends s{constructor(t){super(),this.lambda=t}accept(t){return t.visitLambdaExpr(this)}toString(){return"Expr.Lambda"}}class p extends s{constructor(t,e,n){super(),this.left=t,this.operator=e,this.right=n}accept(t){return t.visitLogicalExpr(this)}toString(){return"Expr.Logical"}}class d extends s{constructor(t){super(),this.value=t}accept(t){return t.visitListExpr(this)}toString(){return"Expr.List"}}class m extends s{constructor(t){super(),this.value=t}accept(t){return t.visitLiteralExpr(this)}toString(){return"Expr.Literal"}}class f extends s{constructor(t){super(),this.construct=t}accept(t){return t.visitNewExpr(this)}toString(){return"Expr.New"}}class b extends s{constructor(t,e){super(),this.name=t,this.increment=e}accept(t){return t.visitPostfixExpr(this)}toString(){return"Expr.Postfix"}}class g extends s{constructor(t,e,n){super(),this.start=t,this.end=e,this.step=n}accept(t){return t.visitRangeExpr(this)}toString(){return"Expr.Range"}}class v extends s{constructor(t,e,n){super(),this.entity=t,this.key=e,this.value=n}accept(t){return t.visitSetExpr(this)}toString(){return"Expr.Set"}}class x extends s{constructor(t,e){super(),this.index=t,this.args=e}accept(t){return t.visitSuperExpr(this)}toString(){return"Expr.Super"}}class w extends s{constructor(t,e,n){super(),this.condition=t,this.thenExpr=e,this.elseExpr=n}accept(t){return t.visitTernaryExpr(this)}toString(){return"Expr.Ternary"}}class E extends s{constructor(t,e){super(),this.operator=t,this.right=e}accept(t){return t.visitUnaryExpr(this)}toString(){return"Expr.Unary"}}class y extends s{constructor(t){super(),this.name=t}accept(t){return t.visitVariableExpr(this)}toString(){return"Expr.Variable"}}class k extends s{constructor(t){super(),this.value=t}accept(t){return t.visitZtringExpr(this)}toString(){return"Expr.Ztring"}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return u}),n.d(e,"g",function(){return l}),n.d(e,"h",function(){return h}),n.d(e,"i",function(){return p}),n.d(e,"j",function(){return d});class s{constructor(){}}class r extends s{constructor(t){super(),this.statements=t}accept(t){return t.visitBlockStmt(this)}toString(){return"Stmt.Block"}}class i extends s{constructor(t,e,n){super(),this.name=t,this.parent=e,this.methods=n}accept(t){return t.visitClassStmt(this)}toString(){return"Stmt.Class"}}class a extends s{constructor(t,e){super(),this.loop=t,this.condition=e}accept(t){return t.visitDoWhileStmt(this)}toString(){return"Stmt.DoWhile"}}class o extends s{constructor(t){super(),this.expression=t}accept(t){return t.visitExpressionStmt(this)}toString(){return"Stmt.Expression"}}class c extends s{constructor(t,e,n){super(),this.name=t,this.params=e,this.body=n}accept(t){return t.visitFuncStmt(this)}toString(){return"Stmt.Func"}}class u extends s{constructor(t,e,n){super(),this.condition=t,this.thenStmt=e,this.elseStmt=n}accept(t){return t.visitIfStmt(this)}toString(){return"Stmt.If"}}class l extends s{constructor(t){super(),this.expression=t}accept(t){return t.visitPrintStmt(this)}toString(){return"Stmt.Print"}}class h extends s{constructor(t,e){super(),this.keyword=t,this.value=e}accept(t){return t.visitReturnStmt(this)}toString(){return"Stmt.Return"}}class p extends s{constructor(t,e,n){super(),this.name=t,this.type=e,this.initializer=n}accept(t){return t.visitVarStmt(this)}toString(){return"Stmt.Var"}}class d extends s{constructor(t,e){super(),this.condition=t,this.loop=e}accept(t){return t.visitWhileStmt(this)}toString(){return"Stmt.While"}}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var s=n(0);const r=t=>t>="0"&&t<="9",i=t=>t>="a"&&t<="z"||t>="A"&&t<="Z",a=t=>i(t)||r(t),o=t=>s.b[t]>=23;class c{constructor(t){this.tokens=[],this.current=0,this.line=1,this.start=0,this.source=t}eof(){return this.current>=this.source.length}advance(){return this.current++,this.source.charAt(this.current-1)}addToken(t,e){const n=this.source.substring(this.start,this.current);this.tokens.push(new s.a(t,n,e,this.line))}match(t){return!this.eof()&&(this.source.charAt(this.current)===t&&(this.current++,!0))}peek(){return this.eof()?"\0":this.source.charAt(this.current)}peekNext(){return this.current+1>=this.source.length?"\0":this.source.charAt(this.current+1)}comment(){for(;"\n"!==this.peek()&&!this.eof();)this.advance()}string(t,e){for(;this.peek()!==t&&!this.eof();)"\n"===this.peek()&&this.line++,this.advance();if(this.eof())return void this.scanError(`Unterminated string, expecting closing ${t}`);this.advance();const n=this.source.substring(this.start+1,this.current-1);this.addToken("string",n)}number(){for(;r(this.peek());)this.advance();for("."===this.peek()&&r(this.peekNext())&&this.advance();r(this.peek());)this.advance();const t=this.source.substring(this.start,this.current);this.addToken("number",Number(t))}identifier(){for(;a(this.peek());)this.advance();let t=this.source.substring(this.start,this.current);o(t="func"===t?"function":t)?this.addToken(t,null):this.addToken("identifier",t)}scan(){for(;!this.eof();)this.start=this.current,this.scanToken();return this.tokens.push(new s.a("eof","",null,this.line)),this.tokens}scanToken(){const t=this.advance();switch(t){case"(":this.addToken("leftParen",null);break;case")":this.addToken("rightParen",null);break;case"[":this.addToken("leftBracket",null);break;case"]":this.addToken("rightBracket",null);break;case"{":this.addToken("leftBrace",null);break;case"}":this.addToken("rightBrace",null);break;case",":this.addToken("comma",null);break;case".":this.addToken("dot",null);break;case";":this.addToken("semicolon",null);break;case"*":this.addToken(this.match("=")?"starEqual":"star",null);break;case"^":this.addToken("caret",null);break;case"?":this.addToken("question",null);break;case":":this.addToken("colon",null);break;case"%":this.addToken(this.match("=")?"percentEqual":"percent",null);break;case"$":this.addToken("dollar",null);break;case"@":this.addToken("function",null);break;case"-":this.addToken(this.match("-")?"minusMinus":this.match(">")?"return":this.match("=")?"minusEqual":"minus",null);break;case"+":this.addToken(this.match("+")?"plusPlus":this.match("=")?"plusEqual":"plus",null);break;case"|":this.addToken(this.match("|")?"or":"pipe",null);break;case"&":this.addToken(this.match("&")?"and":"ampersand",null);break;case"<":this.addToken(this.match("=")?"lessEqual":"less",null);break;case">":this.addToken(this.match("=")?"greaterEqual":"greater",null);break;case"!":this.addToken(this.match("=")?this.match("=")?"bangEqualEqual":"bangEqual":"bang",null);break;case"=":this.match("=")?this.match("=")?this.addToken("equalEqualEqual",null):this.addToken("equalEqual",null):this.match(">")?this.addToken("arrow",null):this.addToken("equal",null);break;case"/":this.match("/")?this.comment():this.match("=")?this.addToken("slashEqual",null):this.addToken("slash",null);break;case"\n":this.line++;break;case"'":case'"':case"`":this.string(t,s.b.string);break;case" ":case"\r":case"\t":break;default:r(t)?this.number():i(t)?this.identifier():this.scanError(`Unexpected character '${t}'`)}}scanError(t){throw conzole.error(`Error at (${this.line}):  ${t}`),new Error("Error while scanning. Execution has been stoped")}}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var s=n(0),r=n(1),i=n(2);class a{constructor(t){this.current=0,this.tokens=t}parse(){const t=[];for(;!this.eof();)t.push(this.declaration());return t}match(...t){for(const e of t)if(this.check(e))return this.advance(),!0;return!1}advance(){return this.eof()||this.current++,this.previous()}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}check(t){return this.peek().type===t}eof(){return this.check(s.b.eof)}consume(t,e){return this.check(t)?this.advance():this.parseError(this.previous(),e)}extraSemicolon(){let t=this.match(s.b.semicolon);if(this.check(s.b.semicolon))for(;this.check(s.b.semicolon);)this.consume(s.b.semicolon,"");return t}parseError(t,e){throw t.type===s.b.eof?conzole.error(`parse error at (${t.line}): at end ${e}`):conzole.error(`[line (${t.line}) parse error at "${t.lexeme}"] => ${e}`),new Error("Error parsing")}parseWarning(t){const e=this.previous();conzole.warn(`[line (${e.line}) parse warning at "${e.lexeme}"] => ${t}`)}synchronize(){for(this.advance();!this.eof();){if(this.previous().type===s.b.semicolon)return;switch(this.peek().type){case s.b.class:case s.b.function:case s.b.var:case s.b.for:case s.b.if:case s.b.while:case s.b.print:case s.b.return:return}this.advance()}}declaration(){try{return this.match(s.b.class)?this.classDeclaration():this.match(s.b.function)?this.funcDeclaration("function"):this.match(s.b.var,s.b.let)?this.varDeclaration(this.previous()):this.statement()}catch(t){throw new Error("Error parsing. Execution has been stopped")}}classDeclaration(){this.check(s.b.function)&&this.consume(s.b.function,"");const t=this.consume(s.b.identifier,"Expected a class name");let e=null;this.match(s.b.extends)&&(e=this.consume(s.b.identifier,"Expected a parent name")),this.consume(s.b.leftBrace,'Expected "{" after class name');const n=[];for(;!this.check(s.b.rightBrace)&&!this.eof();)this.check(s.b.function)&&this.consume(s.b.function,""),n.push(this.funcDeclaration("method"));return this.consume(s.b.rightBrace,`Expected "}" after class "${t.literal}" methods`),this.extraSemicolon()&&this.parseWarning(`Unnecessary semicolon after class ${t.lexeme} declaration`),new i.b(t,e,n)}funcDeclaration(t){const e=this.consume(s.b.identifier,`Expected a ${t} name`);return this.funcParamsBody(e,t)}funcParams(){const t=[];if(!this.check(s.b.rightParen))do{t.length>=255&&this.parseError(this.peek(),"Parameter count exceeds 255"),t.push(this.consume(s.b.identifier,"Expected a parameter name"))}while(this.match(s.b.comma));return this.consume(s.b.rightParen,'Expect ")" after parameters'),t}funcParamsBody(t,e){this.consume(s.b.leftParen,`Expected "(" after ${e}`);const n=this.funcParams();if(this.match(s.b.leftBrace)){const e=this.block();return t.type!==s.b.lambda&&this.extraSemicolon()&&this.parseWarning(`Unnecessary semicolon after function ${t.lexeme} declaration`),new i.e(t,n,e)}if(this.match(s.b.arrow)){const e=[];let r;const a=this.previous();return this.check(s.b.semicolon)||(r=this.expression()),this.match(s.b.semicolon),e.push(new i.h(a,r)),new i.e(t,n,e)}this.consume(s.b.leftBrace,`Expect "{" before ${e} body`)}varDeclaration(t){const e=this.consume(s.b.identifier,"Expected a variable name");let n=null;return this.match(s.b.equal)&&(n=this.expression()),this.consume(s.b.semicolon,'Expected semicolon ";" after a value.'),new i.i(e,t,n)}statement(){return this.match(s.b.if)?this.ifStatement():this.match(s.b.print)?this.printStatement():this.match(s.b.do)?this.doWhileStatement():this.match(s.b.while)?this.whileStatement():this.match(s.b.for)?this.forStatement():this.match(s.b.leftBrace)?new i.a(this.block()):this.match(s.b.return)?this.returnStatement():this.expressionStatement()}ifStatement(){this.consume(s.b.leftParen,'Expected "(" after an if');const t=this.expression();this.consume(s.b.rightParen,'Expected ")" after if condition');const e=this.statement();let n=null;return this.match(s.b.else)&&(n=this.statement()),new i.f(t,e,n)}whileStatement(){this.consume(s.b.leftParen,'Expected "(" after a while statement');const t=this.expression();this.consume(s.b.rightParen,'Expected ")" after while condition');const e=this.statement();return new i.j(t,e)}forStatement(){let t,e,n;this.consume(s.b.leftParen,'Expected "(" after a for statement'),t=this.match(s.b.semicolon)?null:this.match(s.b.var,s.b.let)?this.varDeclaration(this.previous()):this.expressionStatement(),this.check(s.b.semicolon)||(e=this.expression()),this.consume(s.b.semicolon,'Expected ";" after loop condition'),this.check(s.b.rightParen)||(n=this.expression()),this.consume(s.b.rightParen,'Expected ";" after loop condition');let a=this.statement();return null!==n&&(a=new i.a([a,new i.d(n)])),null===e&&(e=new r.j(!0)),a=new i.j(e,a),null!==t&&(a=new i.a([t,a])),a}doWhileStatement(){const t=this.statement();this.consume(s.b.while,"Expected condition after do statement"),this.consume(s.b.leftParen,'Expected "(" after a while');const e=this.expression();return this.consume(s.b.rightParen,'Expected ")" after while condition'),this.consume(s.b.semicolon,'Expected semicolon ";" after a do while condition'),new i.c(t,e)}printStatement(){const t=this.expression();return this.consume(s.b.semicolon,'Expected semicolon ";" after expression.'),new i.g(t)}returnStatement(){const t=this.previous();let e=null;return this.check(s.b.semicolon)||(e=this.expression()),this.consume(s.b.semicolon,'Exected ";" after return statement'),new i.h(t,e)}block(){const t=[];for(;!this.check(s.b.rightBrace)&&!this.eof();)t.push(this.declaration());return this.consume(s.b.rightBrace,'Expected closing block "}"'),t}expressionStatement(){const t=this.expression();if(this.consume(s.b.semicolon,`Expected semicolon ";" after ${t} expression`),this.match(s.b.semicolon)){const t=this.previous();for(conzole.warn(`[line (${t.line}) parse warning at "${t.lexeme}"] => unnecessary semicolon or empty statement`);this.match(s.b.semicolon););}return new i.d(t)}expression(){return this.assignment()}assignment(){const t=this.ternary();if(this.match(s.b.equal,s.b.plusEqual,s.b.minusEqual,s.b.starEqual,s.b.slashEqual)){const e=this.previous();let n=this.assignment();if(t instanceof r.s){const i=t.name;return e.type!==s.b.equal&&(n=new r.b(new r.s(i),e,n)),new r.a(i,n)}if(t instanceof r.e)return e.type!==s.b.equal&&(n=new r.b(new r.e(t.entity,t.key),e,n)),new r.o(t.entity,t.key,n);this.parseError(e,"Invalid l-value, is not an assigning target.")}return t}ternary(){const t=this.logicalOr();if(this.match(s.b.question)){const e=this.ternary();this.consume(s.b.colon,'Expected ":" after ternary ? expression');const n=this.ternary();return new r.q(t,e,n)}return t}logicalOr(){let t=this.logicalAnd();for(;this.match(s.b.or);){const e=this.previous(),n=this.logicalAnd();t=new r.k(t,e,n)}return t}logicalAnd(){let t=this.equality();for(;this.match(s.b.and);){const e=this.previous(),n=this.equality();t=new r.k(t,e,n)}return t}equality(){let t=this.comparison();for(;this.match(s.b.bangEqual,s.b.equalEqual,s.b.bangEqualEqual,s.b.equalEqualEqual);){const e=this.previous(),n=this.comparison();t=new r.b(t,e,n)}return t}comparison(){let t=this.addition();for(;this.match(s.b.greater,s.b.greaterEqual,s.b.less,s.b.lessEqual);){const e=this.previous(),n=this.addition();t=new r.b(t,e,n)}return t}addition(){let t=this.modulus();for(;this.match(s.b.minus,s.b.plus);){const e=this.previous(),n=this.modulus();t=new r.b(t,e,n)}return t}modulus(){let t=this.multiplication();for(;this.match(s.b.percent);){const e=this.previous(),n=this.multiplication();t=new r.b(t,e,n)}return t}multiplication(){let t=this.unary();for(;this.match(s.b.slash,s.b.star);){const e=this.previous(),n=this.unary();t=new r.b(t,e,n)}return t}unary(){if(this.match(s.b.minus,s.b.bang,s.b.dollar,s.b.plusPlus,s.b.minusMinus)){const t=this.previous(),e=this.unary();return new r.r(t,e)}return this.newKeyword()}newKeyword(){if(this.match(s.b.new)){const t=this.call();return new r.l(t)}return this.call()}call(){let t=this.primary();for(;;){if(this.match(s.b.leftParen)){let e=t;do{const t=[];if(!this.check(s.b.rightParen))do{t.push(this.expression())}while(this.match(s.b.comma));const n=this.consume(s.b.rightParen,'Expected ")" after arguments');e=new r.c(e,n,t,null)}while(this.match(s.b.leftParen));return e}if(this.match(s.b.dot))t=this.dotGet(t);else{if(!this.match(s.b.leftBracket))break;t=this.bracketGet(t)}}return t}dotGet(t){const e=this.consume(s.b.identifier,"Expect property name after '.'"),n=new r.g(e);return new r.e(t,n)}bracketGet(t){let e=null,n=null,i=null;if(this.check(s.b.colon)||(e=this.expression()),this.match(s.b.colon)&&!this.check(s.b.colon)&&(n=this.expression()),this.match(s.b.colon)&&!this.check(s.b.rightBracket)&&(i=this.expression()),this.consume(s.b.rightBracket,'Expected "]" after property name expression'),!e||n||i){const s=new r.n(e,n,i);return new r.e(t,s)}return new r.e(t,e)}primary(){if(this.match(s.b.false))return new r.j(!1);if(this.match(s.b.true))return new r.j(!0);if(this.match(s.b.null))return new r.j(null);if(this.match(s.b.number))return new r.j(this.previous().literal);if(this.match(s.b.string))return new r.t(this.previous().literal);if(this.match(s.b.identifier)){const t=this.previous();return this.match(s.b.plusPlus)?new r.m(t,1):this.match(s.b.minusMinus)?new r.m(t,-1):new r.s(t)}if(this.match(s.b.leftParen)){const t=this.expression();return this.consume(s.b.rightParen,'Expected ")" after expression'),new r.f(t)}if(this.match(s.b.leftBrace))return this.entity();if(this.match(s.b.function)){const t=new s.a("lambda","lambda","lambda",this.previous().line),e=this.funcParamsBody(t,"lambda");return new r.h(e)}if(this.match(s.b.super))return this.superCall();if(this.match(s.b.leftBracket))return this.array();throw this.parseError(this.peek(),"Expected expression")}entity(){if(this.match(s.b.rightBrace))return new r.d([]);const t=[];do{if(this.match(s.b.string,s.b.identifier)){const e=this.previous();this.consume(s.b.colon,'Expected ":" colon after member');const n=this.expression();t.push(new r.o(null,new r.g(e),n))}else this.parseError(this.peek(),"String or identifier expected after Object {")}while(this.match(s.b.comma));return this.consume(s.b.rightBrace,'Expected "}" after object literal'),new r.d(t)}array(){const t=[];if(this.match(s.b.rightBracket))return new r.i([]);do{t.push(this.expression())}while(this.match(s.b.comma));return this.consume(s.b.rightBracket,'Expected "]" after array declaration'),new r.i(t)}superCall(){const t=[];for(;this.match(s.b.dot);){const e=this.consume(s.b.identifier,"Expected method name after super");t.push(e)}const e=[];this.consume(s.b.leftParen,"Expected function parameters or method name after super");do{if(!this.check(s.b.rightParen))do{e.push(this.expression())}while(this.match(s.b.comma));this.consume(s.b.rightParen,'Expected ")" after super arguments')}while(this.match(s.b.leftParen));return new r.p(t,e)}}},function(t,e,n){"use strict";var s;n.d(e,"a",function(){return r}),function(t){t[t.User=0]="User",t[t.Error=1]="Error",t[t.Warning=2]="Warning",t[t.Info=3]="Info"}(s||(s={}));class r{constructor(){this.messages=[]}add(t,e){this.messages.push({text:t,time:new Date,type:e})}clear(){this.messages=[]}log(t){this.add(t,s.User)}warn(t){this.add(t,s.Warning)}error(t){this.add(t,s.Error)}info(t){this.add(t,s.Info)}first(){return this.messages[0].text}last(){return this.messages[this.messages.length-1].text}print(){return console.log(this.messages.map(t=>t.text))}}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});const s='\n// slicing strings\nprint "one two three four"[4:7:1]; // prints two\nprint "hello world"[6::1]; // prints world\nprint "hello world"[::-1]; //prints dlrow olleh\n\n// Prototype objects\n@MyClass(text) {\n    this.text = text;\n}\nMyClass.method = @(text) {\n    this.text = this.text + text;\n};\nMyClass.count = @(times) {\n    @nested(num) {\n        return num * num;\n    }\n    for (let i = 0; i < times; ++i) {\n        print nested(i);\n    }\n};\nvar instance = new MyClass(\'Hello \');\ninstance.method(\'World\');\ninstance.count(3);\nprint instance.text;\n\n// sugar coated classes\nclass MyClassClass {\n    constructor(alfa) {\n        this.something = \'anything\' + alfa;\n    }\n}\nlet testClassClass = new MyClassClass(\' is something\');\nprint testClassClass.something;\n\n// shallow multiple inheritance\n@Blade() {\n    this.sharpness = "very sharp";\n}\nBlade.cut = @() {\n    print "cutting..." + this.sharpness;\n};\n@Handle() {\n    this.color = "wood";\n}\nHandle.hold = @() {\n    print "holding..." + this.color;\n};\n@Knife() {\n    Blade.invoke(this);\n    Handle.invoke(this);\n}\nKnife.merge(Blade);\nKnife.merge(Handle);\nlet knife = new Knife();\nknife.cut();\nknife.hold();\n\n// Recursive function\nfunction factorialize(n) {\n    if (n < 0) {\n        return -1;\n    }\n    if (n == 0) {\n        return 1;\n    }\n    return (n * factorialize(n - 1));\n}\nprint factorialize(11);\n\n// same as factorialize but with ternary\n// and short form function definition\n@factorialize2(n) =>\n    n < 0 ? -1 : (n == 0 ? 1 : (n * factorialize(n - 1)));\n\nprint factorialize2(12);\n\n// nested function returns function\n@add(a) => @(b) => @(c) => a + b + c;\nprint add(100)(20)(3);\n\nfunc sub(a) {\n    return func (b) {\n        return func (c) {\n            return a - b - c;\n        };\n    };\n}\nprint sub(100)(10)(1);\n\n// while loop and ternary operator\nlet i = 0;\nwhile (i <= 4) {\n    print i % 2 ? \'odd\' : \'even\';\n    i = i + 1;\n}\n// literals\nvar literal = {\n    firstname: "John",\n    lastname: "Doe",\n    records: {\n        prev: "previous",\n        next: "next"\n    }\n};\nprint literal.records.prev;\n\nlet x = [1, 20, 300];\nlet y = [100, x[1]];\nprint y[0];\ny.push(x);\ny.newProperty = "anything";\nprint y.join(\',\');\nlet z = y.join(\'-\');\n'},function(t,e,n){"use strict";var s=n(1),r=n(2);class i{constructor(t=null){this.values=new Map,this.parent=t}scopeError(t){throw conzole.error(`[scope error] => ${t}`),new Error}set(t,e){this.values.set(t,e)}define(t,e){this.values.has(t)?this.scopeError(`identifier "${t}" has already been defined`):this.set(t,e)}assign(t,e){if(this.values.has(t))this.set(t,e);else{if(null!==this.parent)return this.parent.assign(t,e);this.scopeError(`Identifier "${t}" has not been defined`)}}get(t){return this.values.has(t.lexeme)?this.values.get(t.lexeme):null!==this.parent?this.parent.get(t):void this.scopeError(`Error at (${t.line}): "${t.lexeme}" is not defined`)}first(t){return this.values.has(t)?this.values.get(t):null}obtain(t){return this.values.has(t)?this.values.get(t):null!==this.parent?this.parent.obtain(t):null}}class a extends Error{constructor(t){super(),this.value=t}}class o{constructor(t,e=null,n){this.values=new Map(t),this.prototype=e,this.owner=n}set(t,e){this.values.set(t,e)}get(t){if(this.values.has(t))return this.values.get(t);if(null!==this.prototype)return this.prototype.get(t);throw conzole.error(`[entity error] => ${t} is not defined in ${this.owner}`),new Error}}function c(t){const e=new h;return e.toString=(()=>"<internal function size>"),e.arity=(()=>0),e.call=((t,e,n)=>e.properties.size),e}function u(t){const e=new h;return e.toString=(()=>"<internal function invoke>"),e.arity=(()=>-1),e.call=((t,e,n)=>e.call(t,n[0],n.slice(1))),e}class l{constructor(t,e,n){this.start=t,this.end=e,this.step=n}}class h{constructor(){this.toString=(()=>"<native function>")}}class p{constructor(){this.prototype=new o(null,null,this),this.properties=new Map,this.prototype.values.set("hasOwnProperty",function(t){const e=new h;return e.toString=(()=>"<internal function hasOwnProperty>"),e.arity=(()=>1),e.call=((t,e,n)=>e.properties.has(n[0])),e}()),this.prototype.values.set("size",c),this.prototype.values.set("inherit",function(t){const e=new h;return e.call=((e,n,s)=>{t.prototype.values=new Map([...s[0].properties,...t.prototype.values])}),e.toString=(()=>"<internal inheritance function>"),e.arity=(()=>1),e}(this))}get(t){return this.properties.has(t)?this.properties.get(t):this.prototype.get(t)}set(t,e){this.properties.set(t,e)}toString(){return"<prototype entity>"}}class d extends p{constructor(){super(),this.prototype.values.set("invoke",u())}arity(){return 0}call(t,e,n){}toString(){return"<internal function>"}}class m extends d{constructor(t,e,n=null){super(),this.declaration=t,this.closure=e,this.prototype.values.set("merge",function(t){const e=new h;return e.call=((e,n,s)=>{t.properties=s[1]?new Map([...t.properties,...s[0].properties]):new Map([...s[0].properties,...t.properties])}),e.toString=(()=>"<internal merge function>"),e.arity=(()=>-1),e}(this)),this.prototype.values.set("extend",function(t){const e=new h;return e.call=((e,n,s)=>{const r=new o(t.properties,new o(s[0].properties,s[0].prototype,n),n);t.prototype=r}),e.toString=(()=>"<internal merge function>"),e.arity=(()=>-1),e}(this)),this.name=this.declaration.name.lexeme,this.prototype.values.set("name",this.name),this.parent=n}toString(){return`<${this.name}  function>`}arity(){return this.declaration.params.length}call(t,e,n){const s=new i(this.closure);for(let t=0;t<this.declaration.params.length;t++)s.define(this.declaration.params[t].lexeme,n[t]);s.set("this",e),this.parent;try{t.executeBlock(this.declaration.body,s)}catch(t){if(t instanceof a)return t.value;throw conzole.error("Runtime error. Execution has been stopped"),conzole.error(t.message),new Error("Runtime error. Execution has been stopped")}return null}}class f extends d{constructor(t){super(),this.instanceof=t.declaration.name.lexeme,this.properties=new Map,this.prototype=new o(t.properties,t.prototype,this)}toString(){return"<"+this.instanceof+" instance>"}}class b extends p{constructor(t){super(),this.value=t,this.prototype.values.set("invoke",u()),this.prototype.values.set("size",function(t){const e=new h;return e.toString=(()=>"<internal function size>"),e.arity=(()=>0),e.call=((t,e,n)=>e.value.length),e}()),this.prototype.values.set("substr",function(t){const e=new h;return e.toString=(()=>"<internal function size>"),e.arity=(()=>-1),e.call=((t,e,n)=>new b(e.value.substr(n[0],n[1]))),e}()),this.prototype.values.set("split",function(t){const e=new h;return e.toString=(()=>"<internal function size>"),e.arity=(()=>1),e.call=((t,e,n)=>new g(e.value.split(n[0]))),e}())}get(t){return"number"==typeof t?this.value[t]:t instanceof l?this.range(t):super.get(t)}set(t,e){"number"!=typeof t&&this.properties.set(t,e)}arity(){return 0}call(t,e,n){return new b(n[0])}toString(){return this.value}range(t){null===t.step&&(t.step=1),null===t.end&&(t.end=t.step>0?this.value.length-1:0),null===t.start&&(t.start=t.step>0?0:this.value.length-1);let e="";if(t.step>0)for(let n=t.start;n<=t.end;n+=t.step)e+=this.value[n];if(t.step<0)for(let n=t.start;n>=t.end;n+=t.step)e+=this.value[n];return new b(e)}}class g extends p{constructor(t){super(),this.values=t,this.prototype.values.set("invoke",u()),this.prototype.values.set("size",function(t){const e=new h;return e.toString=(()=>"<internal function size>"),e.arity=(()=>0),e.call=((t,e,n)=>e.values.length),e}()),this.prototype.values.set("join",function(t){const e=new h;return e.toString=(()=>"<internal function size>"),e.arity=(()=>1),e.call=((t,e,n)=>new b(e.values.join(n[0]))),e}()),this.prototype.values.set("push",function(t){const e=new h;return e.toString=(()=>"<internal function size>"),e.arity=(()=>1),e.call=((t,e,n)=>e.values.push(n[0])),e}()),this.prototype.values.set("pop",function(t){const e=new h;return e.toString=(()=>"<internal function size>"),e.arity=(()=>0),e.call=((t,e,n)=>e.values.pop(n[0])),e}()),this.prototype.values.set("each",function(t){const e=new h;return e.toString=(()=>"<internal function size>"),e.arity=(()=>-1),e.call=((t,e,n)=>{for(let s=0;s<e.values.length;++s)n[0].call(t,e,[e.values[s],s,e])}),e}()),this.prototype.values.set("map",function(t){const e=new h;return e.toString=(()=>"<internal function size>"),e.arity=(()=>-1),e.call=((t,e,n)=>{for(let s=0;s<e.values.length;++s)e.values[s]=n[0].call(t,e,[e.values[s],s,e])}),e}()),this.prototype.values.set("find",function(t){const e=new h;return e.toString=(()=>"<internal function size>"),e.arity=(()=>-1),e.call=((t,e,n)=>{for(let s=0;s<e.values.length;++s)if(n[0].call(t,e,[e.values[s],s,e]))return e.values[s];return null}),e}()),this.prototype.values.set("indexOf",function(t){const e=new h;return e.toString=(()=>"<internal function size>"),e.arity=(()=>1),e.call=((t,e,n)=>{for(let t=0;t<e.values.length;++t)if(e.values[t]===n[0])return t;return null}),e}())}get(t){return"number"==typeof t?this.values[t]:t instanceof l?this.range(t):super.get(t)}set(t,e){"number"!=typeof t?this.properties.set(t,e):this.values[t]=e}range(t){null===t.step&&(t.step=1),null===t.end&&(t.end=t.step>0?this.values.length-1:0),null===t.start&&(t.start=t.step>0?0:this.values.length-1);let e=[];if(t.step>0)for(let n=t.start;n<=t.end;n+=t.step)e.push(this.values[n]);if(t.step<0)for(let n=t.start;n>=t.end;n+=t.step)e.push(this.values[n]);return new g(e)}arity(){return 0}call(t,e,n){}toString(){return`[${this.values.join(",")}]`}}var v=n(0);n.d(e,"a",function(){return x});class x{constructor(){this.global=new i,this.scope=this.global,this.global.define("echo",function(){const t=new h;return t.arity=(()=>1),t.toString=(()=>"<native function>"),t.call=((t,e,n)=>console.log(n[0])),t}()),this.global.define("rand",function(){const t=new h;return t.arity=(()=>0),t.call=(()=>Math.random()),t.toString=(()=>"<native function>"),t}())}evaluate(t){return t.accept(this)}execute(t){t.accept(this)}interpet(t){for(const e of t)this.execute(e)}interpreterError(t){throw conzole.log(`[interpreter error] => ${t}`),new Error}visitExpressionStmt(t){this.evaluate(t.expression)}visitPrintStmt(t){let e=this.evaluate(t.expression);e=null===e?"null":e,conzole.log(e)}visitVarStmt(t){let e=null;null!==t.initializer&&(e=this.evaluate(t.initializer)),e instanceof m&&"lambda"===e.name&&(e.name=t.name.lexeme,e.prototype.set("name",e.name)),t.type.type===v.b.var?this.scope.set(t.name.lexeme,e):this.scope.define(t.name.lexeme,e)}visitVariableExpr(t){return this.scope.get(t.name)}visitPostfixExpr(t){const e=this.scope.get(t.name),n=e+t.increment;return this.scope.assign(t.name.lexeme,n),e}visitListExpr(t){const e=[];for(const n of t.value)e.push(this.evaluate(n));return new g(e)}visitZtringExpr(t){return new b(t.value)}visitAssignExpr(t){const e=this.evaluate(t.value);return this.scope.assign(t.name.lexeme,e),e}visitBinaryExpr(t){let e=this.evaluate(t.left),n=this.evaluate(t.right);switch(e=e instanceof b?e.toString():e,n=n instanceof b?n.toString():n,t.operator.type){case v.b.minus:case v.b.minusEqual:return e-n;case v.b.slash:case v.b.slashEqual:return e/n;case v.b.star:case v.b.starEqual:return e*n;case v.b.percent:case v.b.percentEqual:return e%n;case v.b.plus:case v.b.plusEqual:return isNaN(e)||isNaN(n)?e instanceof g&&n instanceof g?new g(e.values.concat(n.values)):new b(e+n):e+n;case v.b.pipe:return e|n;case v.b.caret:return e^n;case v.b.greater:return e>n;case v.b.greaterEqual:return e>=n;case v.b.less:return e<n;case v.b.lessEqual:return e<=n;case v.b.equalEqual:return e==n;case v.b.equalEqualEqual:return e===n;case v.b.bangEqual:return e!=n;case v.b.bangEqualEqual:return e!==n;default:return conzole.warn(t),null}}visitLogicalExpr(t){return t.operator.type===v.b.and?this.evaluate(t.left)&&this.evaluate(t.right):this.evaluate(t.left)||this.evaluate(t.right)}visitTernaryExpr(t){return this.evaluate(t.condition)?this.evaluate(t.thenExpr):this.evaluate(t.elseExpr)}visitGroupingExpr(t){return this.evaluate(t.expression)}visitLiteralExpr(t){return t.value}visitUnaryExpr(t){const e=this.evaluate(t.right);switch(t.operator.type){case v.b.minus:return-Number(e);case v.b.bang:return!Boolean(e);case v.b.dollar:return e.length;case v.b.plusPlus:const n=Number(e)+1;return this.scope.assign(t.right.name.lexeme,n),n;case v.b.minusMinus:const s=Number(e)-1;return this.scope.assign(t.right.name.lexeme,s),s;default:return null}}executeBlock(t,e){const n=this.scope;this.scope=e;for(const e of t)this.execute(e);this.scope=n}visitBlockStmt(t){this.executeBlock(t.statements,new i(this.scope))}visitIfStmt(t){this.evaluate(t.condition)?this.execute(t.thenStmt):null!==t.elseStmt&&this.execute(t.elseStmt)}visitWhileStmt(t){for(;this.evaluate(t.condition);)this.execute(t.loop)}visitDoWhileStmt(t){do{this.execute(t.loop)}while(this.evaluate(t.condition))}visitCallExpr(t){const e=this.evaluate(t.callee),n=[];let r=null;t.callee instanceof s.e?r=this.evaluate(t.callee.entity):null!==t.thiz&&(r=t.thiz);for(const e of t.args)n.push(this.evaluate(e));e instanceof d||e instanceof h||this.interpreterError(`${e} is not a function`);const i=e;return n.length!==i.arity()&&-1!==i.arity()&&conzole.warn(`Warning at (${t.paren.line}): ${e} mismatched argument length; \n Expected ${i.arity()} but got ${n.length} `),i.call(this,r,n)}visitSuperExpr(t){const e=this.scope.first("this");e||conzole.error("super can only be called on child instances");const n=this.scope.obtain(e.instanceof);n||conzole.error(`${e} is not an instance of an entity`);const s=n.parent;s||conzole.error(`${e} entity has no parent`);let r=null;for(let e of t.index)r=s.get(e.lexeme);const i=[];for(const e of t.args)i.push(this.evaluate(e));return r?r.call(this,e,i):s.call(this,e,i)}visitNewExpr(t){const e=t.construct,n=this.evaluate(e.callee),s=new f(n);return e.thiz=s,this.evaluate(e),s}visitEntityExpr(t){const e=new p;for(const n of t.properties){const t=this.evaluate(n.key),s=this.evaluate(n.value);e.set(t,s)}return e}visitKeyExpr(t){return t.name.lexeme}visitGetExpr(t){const e=this.evaluate(t.entity),n=this.evaluate(t.key);if(e instanceof p)return e.get(n);this.interpreterError(`${e}.${n}: only instances have properties`)}visitSetExpr(t){const e=this.evaluate(t.entity),n=this.evaluate(t.key);e instanceof p||conzole.warn(`${e} is not a runtime Object`);const s=this.evaluate(t.value);return e.set(n,s),s}visitFuncStmt(t){const e=new m(t,this.scope);return this.scope.define(t.name.lexeme,e),null}visitClassStmt(t){let e=t.methods.find(t=>"constructor"===t.name.lexeme);const n=t.methods.filter(t=>"constructor"!==t.name.lexeme);e?e.name=t.name:e=new r.e(t.name,[],[]);const s=new m(e,this.scope);let i=null;t.parent&&(i=this.scope.get(t.parent))&&(s.parent=i,s.prototype=new o(i.properties,i.prototype,s));for(let t of n)s.properties.set(t.name.lexeme,new m(t,this.scope,i));return this.scope.set(t.name.lexeme,s),null}visitLambdaExpr(t){const e=t.lambda;return new m(e,this.scope)}visitReturnStmt(t){let e=null;throw t.value&&(e=this.evaluate(t.value)),new a(e)}visitRangeExpr(t){return new l(t.start?this.evaluate(t.start):null,t.end?this.evaluate(t.end):null,t.step?this.evaluate(t.step):null)}}},function(t,e,n){"use strict";n.r(e),function(t){var e=n(3),s=n(4),r=n(7),i=n(5),a=n(6);"undefined"==typeof window&&(t.window=t),window.conzole=new i.a,window.demoSourceCode=a.a,window.execute=(t=>(new r.a).interpet(new s.a(new e.a(t).scan()).parse())),window.atscript=(t=>(window.conzole.clear(),window.execute(t),window.conzole.first()))}.call(this,n(9))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n}]);